<section class="card" id="gate">
  <h2>Application Eligibility</h2>
  <p class="subtitle" style="margin-top:-6px">Please confirm the two items below to proceed.</p>

  <div style="display:grid; gap:12px; margin:14px 0">
    <label>
      <strong>Are you a U.S. Citizen?</strong><br/>
      <label style="margin-right:12px"><input type="radio" name="citizen" value="yes"> Yes</label>
      <label><input type="radio" name="citizen" value="no"> No</label>
    </label>

    <label>
      <strong>Are you 18 years of age or older?</strong><br/>
      <label style="margin-right:12px"><input type="radio" name="age18" value="yes"> Yes</label>
      <label><input type="radio" name="age18" value="no"> No</label>
    </label>
  </div>

  <div class="cta-wrap" style="margin-top:6px">
    <a id="openFormBtn" class="button" href="#" aria-disabled="true" style="pointer-events:none; opacity:.5">
      Continue to Application
    </a>
  </div>

  <div id="denyMsg" style="text-align:center; color:#b45309; background:#fff7ed; border:1px solid #fde68a; padding:10px 12px; border-radius:12px; margin-top:10px; display:none">
    You must be a U.S. citizen and 18+ to apply.
  </div>
</section>

<script>
  // === Eligibility gate logic ===
  (function () {
    const formURL = "https://docs.google.com/forms/d/e/1FAIpQLSeZYPI7qD0iieOOxrHQYG5zRwSkksIDFpsoL5EGm_zCRInqMg/viewform?usp=dialog"; // <-- REPLACE
    const btn = document.getElementById("openFormBtn");
    const deny = document.getElementById("denyMsg");
    const citizen = Array.from(document.getElementsByName("citizen"));
    const age18 = Array.from(document.getElementsByName("age18"));

    function update() {
      const c = citizen.find(r => r.checked)?.value;
      const a = age18.find(r => r.checked)?.value;

      if (c === "yes" && a === "yes") {
        btn.setAttribute("href", formURL);
        btn.setAttribute("target", "_blank");
        btn.setAttribute("rel", "noopener");
        btn.style.pointerEvents = "auto";
        btn.style.opacity = "1";
        btn.setAttribute("aria-disabled", "false");
        deny.style.display = "none";
      } else {
        btn.setAttribute("href", "#");
        btn.removeAttribute("target");
        btn.style.pointerEvents = "none";
        btn.style.opacity = ".5";
        btn.setAttribute("aria-disabled", "true");
        deny.style.display = (c === "no" || a === "no") ? "block" : "none";
      }
    }

    [...citizen, ...age18].forEach(el => el.addEventListener("change", update));
    update();
  })();
</script>
